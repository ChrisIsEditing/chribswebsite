<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://chrisisediting.github.io/chribswebsite/Assets/media.png" type="image/png">
    <title>Media</title>
    <style>
        body {
            background-color: #0c0c0c;
            color: #d8d8d8;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        h1 {
            color: rgb(231, 75, 75);
            margin-bottom: 10px;
            margin-top: 5px;
        }

        .search-container {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .search-input {
            padding: 8px;
            width: 60%;
            margin-top: 5px;
            max-width: 300px;
            border: 2px solid salmon;
            border-radius: 10px 0 0 10px;
            background-color: #222;
            color: #d8d8d8;
            outline: none;
            font-size: 1rem;
        }

        .search-button {
            padding: 8px 10px;
            margin-top: 5px;
            border: 2px solid rgb(250, 114, 114);
            border-left: none;
            border-radius: 0 10px 10px 0;
            background-color: rgb(250, 114, 114);
            color: #000;
            cursor: pointer;
            transition: background-color 0.3s;
            font-style: italic;
            font-weight: bold;
            font-size: 1rem;
        }

        .search-button:hover {
            background-color: #fd5353;
        }
        .image-type-overlay {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            font-weight: 600;
            padding: 5px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 10; 
            pointer-events: none; 
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            padding: 0 20px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            align-items: flex-start;
        }

        .category-box {
            background-color: #222;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
            transition: transform 0.3s, background-color 0.3s;
            cursor: pointer;
        }

        .category-box:hover {
            transform: scale(1.05);
            background-color: #333;
        }

        .category-box h2 {
            margin: 0 0 10px 0;
            font-size: 1.3rem;
            color: rgb(250, 114, 114);
        }

        .category-images {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .category-images img {
            width: 60px;
            height: 60px;
            border-radius: 5px;
            object-fit: cover;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .category-images img:hover {
            transform: scale(1.1);
        }

        .video-box {
    position: relative;
    width: 310px;
    height: 300px;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    background-color: #222;
    cursor: pointer;
}

.play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.play-button::after {
    content: '';
    border-style: solid;
    border-width: 15px 0 15px 25px;
    border-color: transparent transparent transparent #222;
}

video {
    width: 90%;
    height: 90%;
    object-fit: cover;
}

@media (max-width: 700px) {
    .video-box {
        width: 280px;
        height: 250px;
    }
}


        .image-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .image-box {
            width: 310px;
            height: 300px;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #222;
            cursor: pointer;
        }

        .image-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }


        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
        }

        .overlay img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        @media (max-width: 700px) {
    .categories {
        display: grid;
    }

    .search-input {
        width: 60%;
    }

    .category-images img {
        width: 50px;
        height: 50px;
    }

    .image-box {
        width: 280px; 
        height: 250px;
    }

    .hide-on-search {
    display: none !important;
}

}
@media (min-width: 701px) {
    .categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
}


</style>
</head>
<body>
    <h1 style="position: sticky; font-family: 'Times New Roman', Times, serif; margin-bottom: 0; 
    color: darksalmon; font-weight: bold;">
    <a href="index.html" style="color: rgb(255, 104, 104); font-size: 40px; text-decoration: none; ">I.M.A.G.E</a>
</h1>

<h3 style="color: rgb(255, 187, 166); margin-top: 0%; font-size: small;">
    Interactive. Media. Archive. Gallery.
    <a class="subtitle" style="text-decoration: none; color: rgb(255, 187, 166);" href="system-classes.html">E-CLASS</a>
</h3>

    <div class="search-container">
        <input id="searchInput" class="search-input" type="text" placeholder="Search for images...">
        <button class="search-button" onclick="searchImages()">SEARCH!</button>
    </div>


    <p id="message" style="color: #ff6969; display: none;"></p>

    <hr style="color: #222; width: 90%;">

<p id="latestImagesText" style="color: #ff6969; text-decoration: underline; font-size: 20px;">Latest Images:</p>

    <div id="categories" class="categories">
        <div class="category-box" data-category="memes" onclick="searchCategory('memes')">
            <h2>#Meme</h2>
            <div class="category-images" id="memes-images">

            </div>
        </div>
        <div class="category-box" data-category="photography" onclick="searchCategory('photography')">
            <h2>#GIFs</h2>
            <div class="category-images" id="photography-images">

            </div>
        </div>
        <div class="category-box" data-category="art" onclick="searchCategory('art')">
            <h2>#Art</h2>
            <div class="category-images" id="art-images">

            </div>
        </div>
        <div class="category-box" data-category="wallpapers" onclick="searchCategory('wallpapers')">
            <h2>#Photo</h2>
            <div class="category-images" id="wallpapers-images">

            </div>
        </div>
        <div class="category-box" data-category="chrib's-picks" onclick="searchCategory('chribs-picks')">
            <h2>#Shitpost</h2>
            <div class="category-images" id="chribs-picks-images">

            </div>
        </div>
    </div>

    <div id="results" class="image-container"></div>

    <div id="imageOverlay" class="overlay" onclick="closeOverlay()">
        <img id="enlargedImage" src="" alt="" style="display: none;">
        <video id="enlargedVideo" controls style="display: none; max-width: 90%; max-height: 90%;"></video>
    </div>

    <div id="loading" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.5);">
        <img src="https://chrisisediting.github.io/chribswebsite/Assets/loading.gif" alt="Loading...">
    </div>


    <script src="media.js"></script>
    <script>
        const categories = {
            'memes': 'meme',
            'photography': 'gif',
            'art': 'art',
            'wallpapers': 'photo',
            'chribs-picks': 'shitpost'
        };
    
        function extractTags(filename) {
            const nameWithoutExt = filename.substring(0, filename.lastIndexOf('.')) || filename;
            return nameWithoutExt.toLowerCase().split(' ');
        }
    
        function getLatestImagesByTag(tag, limit = 12) {
            const taggedImages = images.filter(img => {
                const tags = extractTags(img);
                return tags.includes(tag);
            });
    
            return taggedImages.slice(-limit).reverse();
        }
    
        function populateCategories() {
            for (const [categoryId, tag] of Object.entries(categories)) {
                const imageContainer = document.getElementById(`${categoryId}-images`);
                const latestImages = getLatestImagesByTag(tag, 8);
                if (latestImages.length === 0) {
                    imageContainer.innerHTML = '<p>Images coming soon.</p>';
                    continue;
                }
                latestImages.forEach(img => {
                    const imgElement = document.createElement('img');
                    imgElement.src = `Media/${encodeURIComponent(img)}`;
                    imgElement.alt = img;
                    imgElement.loading = 'lazy';
    
                    imgElement.ondblclick = () => openOverlay(`Media/${encodeURIComponent(img)}`);
                    imageContainer.appendChild(imgElement);
                });
            }
        }
    
        function searchImages() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('results');
            const categoriesContainer = document.getElementById('categories');
            const latestImagesText = document.querySelector('p[style*="color: #ff6969"]');
            const message = document.getElementById('message');
            const loadingOverlay = document.getElementById('loading');
    
            resultsContainer.innerHTML = '';
            message.style.display = 'none';
            loadingOverlay.style.display = 'flex';
    
            const isMobile = window.innerWidth <= 700;
    
            if (isMobile && query !== '') {
                categoriesContainer.classList.add('mobile-hide-on-search');
                latestImagesText.classList.add('mobile-hide-on-search');
            } else {
                categoriesContainer.classList.remove('mobile-hide-on-search');
                latestImagesText.classList.remove('mobile-hide-on-search');
            }
    
            if (isMobile && query !== '') {
                categoriesContainer.classList.add('hide-on-search');
                latestImagesText.classList.add('hide-on-search');
            } else {
                categoriesContainer.classList.remove('hide-on-search');
                latestImagesText.classList.remove('hide-on-search');
            }
    
            if (query === '') {
                message.innerText = 'Please enter image Tag/s';
                message.style.display = 'block';
                loadingOverlay.style.display = 'none';
                return;
            }
    
            let imagesToLoad = 0;
            let imagesLoaded = 0;
    
            function checkAllImagesLoaded() {
                if (imagesLoaded === imagesToLoad) {
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 1); 
                }
            }
    
            function createImageElement(img) {
    const imgBox = document.createElement('div');
    imgBox.className = 'image-box';
    
    const imgElement = document.createElement('img');
    imgElement.src = `Media/${encodeURIComponent(img)}`;
    imgElement.alt = img;
    imgElement.onclick = () => openOverlay(`Media/${encodeURIComponent(img)}`);
    imgElement.onload = () => {
        imagesLoaded++;
        checkAllImagesLoaded();
    };
    imgElement.onerror = () => {
        imagesLoaded++;
        checkAllImagesLoaded();
    };
    
    imgBox.appendChild(imgElement);
  
    const overlay = createImageTypeOverlay(img);
    imgBox.appendChild(overlay);
    
    resultsContainer.appendChild(imgBox);
    imagesToLoad++;
}

            function matchTags(img, searchTags) {
                const tags = extractTags(img);
                return searchTags.every(tag => tags.includes(tag));
            }
    
            const searchTags = query.split(' ');
    
            if (query === '/all') {
                const allImages = images.slice().reverse();
                allImages.forEach(createImageElement);
    
                if (allImages.length === 0) {
                    resultsContainer.innerHTML = '<p>No images found! :(</p>';
                    loadingOverlay.style.display = 'none';
                }
            } else {
                const filteredImages = images.filter(img => matchTags(img, searchTags)).reverse();
    
                filteredImages.forEach(createImageElement);
    
                if (filteredImages.length === 0) {
                    resultsContainer.innerHTML = '<p>No images found! :(</p>';
                    loadingOverlay.style.display = 'none';
                }
            }
    
            if (imagesToLoad === 0) {
                loadingOverlay.style.display = 'none';
            }

            return imgBox;
        }
    
        function searchCategory(category) {
    const resultsContainer = document.getElementById('results');
    const categoriesContainer = document.getElementById('categories');
    const latestImagesText = document.getElementById('latestImagesText');
    
    resultsContainer.innerHTML = '';
    
    categoriesContainer.style.display = 'none';
    latestImagesText.style.display = 'none';

    const latestImages = getLatestImagesByTag(categories[category]);
    latestImages.forEach(img => {
        const imgBox = document.createElement('div');
        imgBox.className = 'image-box';
        const imgElement = document.createElement('img');
        imgElement.src = `Media/${encodeURIComponent(img)}`;
        imgElement.alt = img;
        imgElement.onclick = () => openOverlay(`Media/${encodeURIComponent(img)}`);
        imgBox.appendChild(imgElement);
        const overlay = createImageTypeOverlay(img);
        imgBox.appendChild(overlay);
        resultsContainer.appendChild(imgBox);
    });

    if (latestImages.length === 0) {
        resultsContainer.innerHTML = '<p>No images in this category :(.</p>';
    }

}

function showCategories() {
    const resultsContainer = document.getElementById('results');
    const categoriesContainer = document.getElementById('categories');
    const latestImagesText = document.getElementById('latestImagesText');
    
    resultsContainer.innerHTML = '';
    categoriesContainer.style.display = 'flex';
    latestImagesText.style.display = 'block';
}
   
        function isVideo(filename) {
            return /\.(mp4|webm|ogg)$/i.test(filename);
        }
    
        function openOverlay(mediaSrc) {
            const overlay = document.getElementById('imageOverlay');
            const enlargedImage = document.getElementById('enlargedImage');
            const enlargedVideo = document.getElementById('enlargedVideo');
    
            if (isVideo(mediaSrc)) {
                enlargedVideo.src = mediaSrc;
                enlargedVideo.style.display = 'block';
                enlargedImage.style.display = 'none';
            } else {
                enlargedImage.src = mediaSrc;
                enlargedImage.style.display = 'block';
                enlargedVideo.style.display = 'none';
            }
    
            overlay.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
    
        function closeOverlay() {
            const overlay = document.getElementById('imageOverlay');
            const enlargedVideo = document.getElementById('enlargedVideo');
    
            overlay.style.display = 'none';
    
            if (enlargedVideo) {
                enlargedVideo.pause();
                enlargedVideo.currentTime = 0;
            }
            document.body.style.overflow = '';
        }
    
        window.onload = function() {
            populateCategories();
            document.querySelector('.search-input').addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    searchImages();
                }
            });
        };

        function createImageTypeOverlay(img) {
    const overlay = document.createElement('div');
    overlay.className = 'image-type-overlay';
    const extension = img.split('.').pop().toUpperCase();
    overlay.textContent = extension; 
    return overlay;
}
</script>

<div style="display: flex; flex-direction: column; min-height: 0.5vh; margin: 0; padding: 0; margin-bottom: 1px;">
</div>

<div style="flex-grow: 1;"></div>

<footer style="padding: 10px; text-align: center; color: #ffbe82; font-size: 0.8em; 
width: 100%; box-sizing: border-box; margin-bottom: 0px; margin-top: 90px;">

<hr style="width: 280px; margin-bottom: 10px; color: #333;">

<p style="text-align: center; color: #ffbe82; margin-bottom: 0%;">2024 Chribs - All Rights Reserved.</p>

<p><a href="privacy.html" style="color: rgb(250, 114, 114); text-decoration: none; margin-top: 0px;">PRIVACY POLICY</a> | <a href="index.html" style="color: rgb(250, 114, 114); text-decoration: none;">HOME</a></p>

</footer>
</body>
</html>